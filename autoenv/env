#!/usr/bin/env zsh

# Deactivate python virtual envs when changing out of that repo
if [ -n "$VIRTUAL_ENV" ] && ! [[ "$(git rev-parse --show-toplevel 2>/dev/null)" =~ "$(basename "$VIRTUAL_ENV")" ]];
then
  (deactivate 2>/dev/null) || unset VIRTUAL_ENV
fi
